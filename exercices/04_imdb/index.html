
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://example.com/exercices/04_imdb/">
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.0, mkdocs-material-8.5.3">
    
    
      
        <title>04 - IMDB API - Services Web</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7a952b86.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cbb835fc.min.css">
        
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="light-green">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#exercice-04-imdb" class="md-skip">
          Aller au contenu
        </a>
      
    </div>
    <div data-md-component="announce">
      
        <aside class="md-banner">
          <div class="md-banner__inner md-grid md-typeset">
            
            
  

          </div>
          
        </aside>
      
    </div>
    
    
      

  

<header class="md-header md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="../.." title="Services Web" class="md-header__button md-logo" aria-label="Services Web" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2 0-.68.06-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.923 7.923 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8.008 8.008 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.65 15.65 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Services Web
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              04 - IMDB API
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="light-green"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="light-blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Onglets" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Accueil
    </a>
  </li>

      
        
  
  


  
  
  
    

  
  
  
    <li class="md-tabs__item">
      <a href="../../notes_de_cours/api/bonnes_pratiques/" class="md-tabs__link">
        Notes de cours
      </a>
    </li>
  

  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../01_utilisation_api/" class="md-tabs__link md-tabs__link--active">
        Exercices
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Services Web" class="md-nav__button md-logo" aria-label="Services Web" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M16.36 14c.08-.66.14-1.32.14-2 0-.68-.06-1.34-.14-2h3.38c.16.64.26 1.31.26 2s-.1 1.36-.26 2m-5.15 5.56c.6-1.11 1.06-2.31 1.38-3.56h2.95a8.03 8.03 0 0 1-4.33 3.56M14.34 14H9.66c-.1-.66-.16-1.32-.16-2 0-.68.06-1.35.16-2h4.68c.09.65.16 1.32.16 2 0 .68-.07 1.34-.16 2M12 19.96c-.83-1.2-1.5-2.53-1.91-3.96h3.82c-.41 1.43-1.08 2.76-1.91 3.96M8 8H5.08A7.923 7.923 0 0 1 9.4 4.44C8.8 5.55 8.35 6.75 8 8m-2.92 8H8c.35 1.25.8 2.45 1.4 3.56A8.008 8.008 0 0 1 5.08 16m-.82-2C4.1 13.36 4 12.69 4 12s.1-1.36.26-2h3.38c-.08.66-.14 1.32-.14 2 0 .68.06 1.34.14 2M12 4.03c.83 1.2 1.5 2.54 1.91 3.97h-3.82c.41-1.43 1.08-2.77 1.91-3.97M18.92 8h-2.95a15.65 15.65 0 0 0-1.38-3.56c1.84.63 3.37 1.9 4.33 3.56M12 2C6.47 2 2 6.5 2 12a10 10 0 0 0 10 10 10 10 0 0 0 10-10A10 10 0 0 0 12 2Z"/></svg>

    </a>
    Services Web
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Accueil
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Notes de cours
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Notes de cours" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Notes de cours
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_1" type="checkbox" id="__nav_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_1">
          API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="API" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_1">
          <span class="md-nav__icon md-icon"></span>
          API
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notes_de_cours/api/bonnes_pratiques/" class="md-nav__link">
        Les bonnes pratiques dans la conception d'un API
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notes_de_cours/api/json/" class="md-nav__link">
        Le format JSON
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notes_de_cours/api/documentation_api/" class="md-nav__link">
        Documentation de l'API
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_2" type="checkbox" id="__nav_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_2">
          PHP
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="PHP" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_2">
          <span class="md-nav__icon md-icon"></span>
          PHP
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notes_de_cours/php/array/" class="md-nav__link">
        Les tableaux
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notes_de_cours/php/json/" class="md-nav__link">
        Manipulation de données en JSON
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notes_de_cours/php/file_get_contents/" class="md-nav__link">
        Effectuer un appel GET à un service web
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2_3" type="checkbox" id="__nav_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2_3">
          SLIM
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="SLIM" data-md-level="2">
        <label class="md-nav__title" for="__nav_2_3">
          <span class="md-nav__icon md-icon"></span>
          SLIM
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notes_de_cours/slim/devilbox/" class="md-nav__link">
        Configurer un projet SLIM avec Devilbox
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notes_de_cours/slim/structure/" class="md-nav__link">
        Structure de nos projet avec SLIM
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notes_de_cours/slim/recuperer_params/" class="md-nav__link">
        Récupérer les paramètres d'une requête HTTP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../notes_de_cours/slim/monolog/" class="md-nav__link">
        Utilisation de journaux d'évènements (Log files)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Exercices
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Exercices" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Exercices
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../01_utilisation_api/" class="md-nav__link">
        01 - Utilisation d’un service web
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../02_revision_php/" class="md-nav__link">
        02 - Revision PHP
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../03_hello_world_api/" class="md-nav__link">
        03 - Hello World API
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          04 - IMDB API
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        04 - IMDB API
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequis" class="md-nav__link">
    Prérequis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-de-linstallation" class="md-nav__link">
    Test de l'installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structure-du-projet" class="md-nav__link">
    Structure du projet
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercices" class="md-nav__link">
    Exercices
  </a>
  
    <nav class="md-nav" aria-label="Exercices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#premiere-partie-routes" class="md-nav__link">
    Première partie - Routes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deuxieme-partie-filtre-et-pagination" class="md-nav__link">
    Deuxième partie - Filtre et pagination
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troisieme-partie-utilisation-de-monolog" class="md-nav__link">
    Troisième partie - Utilisation de Monolog
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quatrieme-partie-documentation" class="md-nav__link">
    Quatrième partie - Documentation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corrige" class="md-nav__link">
    Corrigé
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table des matières">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table des matières
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#prerequis" class="md-nav__link">
    Prérequis
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#installation" class="md-nav__link">
    Installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-de-linstallation" class="md-nav__link">
    Test de l'installation
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#structure-du-projet" class="md-nav__link">
    Structure du projet
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#exercices" class="md-nav__link">
    Exercices
  </a>
  
    <nav class="md-nav" aria-label="Exercices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#premiere-partie-routes" class="md-nav__link">
    Première partie - Routes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deuxieme-partie-filtre-et-pagination" class="md-nav__link">
    Deuxième partie - Filtre et pagination
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#troisieme-partie-utilisation-de-monolog" class="md-nav__link">
    Troisième partie - Utilisation de Monolog
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#quatrieme-partie-documentation" class="md-nav__link">
    Quatrième partie - Documentation
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#corrige" class="md-nav__link">
    Corrigé
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="exercice-04-imdb">Exercice 04 - IMDB</h1>
<p>Pour cet exercice nous allons travailler avec les 1000 films les mieux notés sur IMDB. Même si le sujet est assez simple, nous allons créer une api un peu plus étoffer grâce au framework <a href="https://www.slimframework.com/">SLIM</a>. Cet exercice va être utiliser sur plusieurs cours, on va y intégrer petit à petit plusieurs notions essentielles, alors il est important de suivre chaque étape et de les compléter.</p>
<h2 id="prerequis">Prérequis</h2>
<ul>
<li>Devilbox, Ampps ou une autre "stack" incluant au minimum Apache, MySQL et PHP) -  <a href="https://ampps.com/">https://ampps.com/</a></li>
<li>Composer - <a href="https://getcomposer.org/">https://getcomposer.org/</a></li>
</ul>
<h2 id="installation">Installation</h2>
<ul>
<li>Créez un nouveau dépôt à partir de celui-ci : <a href="https://github.com/Services-Web-Victo/ex04-depart">https://github.com/Services-Web-Victo/ex04-depart</a></li>
<li>Roulez la commande <code>composer update</code> dans le répertoire de votre projet.</li>
<li>Créez le fichier config/env.php en copiant le fichier config/env.exemple.php et modifiez les informations de connexion à la base de données dans le fichier config/env.php.</li>
<li>Roulez le script <code>ressource/sql/insertData.sql</code> dans la base de données que vous allez utiliser pour l'exercice.</li>
</ul>
<h2 id="test-de-linstallation">Test de l'installation</h2>
<p>Vous devriez avoir accès maintenant aux routes suivantes. Testez les avec Postman et un navigateur pour la route de la documentation.</p>
<table>
<thead>
<tr>
<th>Méthode</th>
<th>Route</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/</td>
<td>Message de bienvenue</td>
</tr>
<tr>
<td>GET</td>
<td>/docs</td>
<td>Documentation de l'api</td>
</tr>
<tr>
<td>GET</td>
<td>/film</td>
<td>Liste de tous les films</td>
</tr>
</tbody>
</table>
<h2 id="structure-du-projet">Structure du projet</h2>
<ul>
<li><strong>/config</strong></li>
<li><strong>Bootstrap.php</strong><ul>
<li>Point d’entrée</li>
</ul>
</li>
<li><strong>Routes.php</strong><ul>
<li>C’est ici qu’on va définir les routes </li>
</ul>
</li>
<li><strong>Settings.php</strong> et <strong>env.php</strong><ul>
<li>Constantes de configuration. Par exemple les informations pour se connecter à la bd</li>
</ul>
</li>
<li><strong>Container.php</strong><ul>
<li>Fonctions “injectées” dans le constructeur.</li>
</ul>
</li>
<li>
<p><strong>Middleware.php</strong></p>
<ul>
<li>Code qui s’execute automatiquement avant ou après les requêtes. (Authentication)</li>
</ul>
</li>
<li>
<p><strong>/src</strong></p>
</li>
<li><strong>/action</strong><ul>
<li>Les controlleurs, un fichier par “action”</li>
</ul>
</li>
<li><strong>/domain</strong><ul>
<li><strong>/nom_du_modele</strong></li>
<li>Séparer la logique application de l’accès aux données</li>
<li><strong>/Repository</strong><ul>
<li>Accès aux données</li>
</ul>
</li>
<li><strong>/Service</strong><ul>
<li>Logique de l’api.</li>
<li>Chaque classe doit n’avoir qu’une seule responsabilitée</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>La route appelle une classe action, ensuite le bon service est appelé. Le service va chercher les données avec la classe repository correspondante.</p>
<h2 id="exercices">Exercices</h2>
<h3 id="premiere-partie-routes">Première partie - Routes</h3>
<p>Créez les routes suivantes pour agrémenter la gestion de films. Voir plus bas pour le format de chaque réponse : </p>
<table>
<thead>
<tr>
<th>Méthodes</th>
<th>Route</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>GET</td>
<td>/film/{id}</td>
<td>Lister seulement le film avec le id en paramètre</td>
</tr>
<tr>
<td>POST</td>
<td>/film</td>
<td>Ajouter un film avec les informations dans le "body" de la requête</td>
</tr>
<tr>
<td>PUT</td>
<td>/film/{id}</td>
<td>Modifier un film avec le id en paramètre et les informations dans le "body"</td>
</tr>
<tr>
<td>DELETE</td>
<td>/film/{id}</td>
<td>Supprimer le film avec le id en paramètre</td>
</tr>
</tbody>
</table>
<ul>
<li>Pour chaque route, créez une classe "action", "service" et "repository". </li>
<li>Retourner aussi les bons codes de statut, voir la section <a href="/notes_de_cours/api/bonnes_pratiques/#utiliser-les-codes-de-statut-http">"Utiliser les codes de statut HTTP"</a> dans les bonnes pratiques.</li>
<li>Testez ensuite vos routes avec Postman.</li>
</ul>
<p><strong>Film à utiliser pour l'ajout</strong></p>
<p>Vous pouvez utiliser les informations suivantes pour créer un nouveau film (<strong>Attention</strong> : augmenter la taille de la colonne genre à varchar(200)): </p>
<pre><code>{
  &quot;poster_link&quot;: &quot;https://www.imdb.com/title/tt0091369/mediaviewer/rm2649548544/?ref_=tt_ov_i&quot;,
  &quot;series_title&quot;: &quot;Labyrinth&quot;,
  &quot;released_year&quot;: 1986,
  &quot;certificate&quot;: &quot;PG&quot;,
  &quot;runtime&quot;: &quot;101 min&quot;,
  &quot;genre&quot;: &quot;Adventure, Family, Fantasy, Musical&quot;,
  &quot;imdb_rating&quot;: 7.3,
  &quot;overview&quot;: &quot;Sixteen-year-old Sarah is given thirteen hours to solve a labyrinth and rescue her baby brother Toby when her wish for him to be taken away is granted by the Goblin King Jareth.&quot;,
  &quot;meta_score&quot;: 50,
  &quot;director&quot;: &quot;Jim Henson&quot;,
  &quot;star1&quot;: &quot;David Bowie&quot;,
  &quot;star2&quot;: &quot;Jennifer Connelly&quot;,
  &quot;star3&quot;: &quot;Toby Froud&quot;,
  &quot;star4&quot;: &quot;Shelley Thompson&quot;,
  &quot;no_of_votes&quot;: 140392,
  &quot;gross&quot;: &quot;13,915,874&quot;
}
</code></pre>
<p><strong>Format des réponses</strong></p>
<p>Pour les 4 routes à ajouter, on va retourner l'objet "film" au complet après l'opération faite. (ex. le film après la modification, le film qui vient d'être supprimé, etc.)</p>
<pre><code>{
  &quot;id&quot;: 1001,
  &quot;poster_link&quot;: &quot;https://m.media-amazon.com/images/M/MV5BMDFkYTc0MGEtZmNhMC00ZDIzLWFmNTEtODM1ZmRlYWMwMWFmXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_UX67_CR0,0,67,98_AL_.jpg&quot;,
  &quot;series_title&quot;: &quot;The Shawshank Redemption&quot;,
  &quot;released_year&quot;: 1994,
  &quot;certificate&quot;: &quot;A&quot;,
  &quot;runtime&quot;: &quot;142 min&quot;,
  &quot;genre&quot;: &quot;Drama&quot;,
  &quot;imdb_rating&quot;: 9.3,
  &quot;overview&quot;: &quot;Two imprisoned men bond over a number of years, finding solace and eventual redemption through acts of common decency.&quot;,
  &quot;meta_score&quot;: 80,
  &quot;director&quot;: &quot;Frank Darabont&quot;,
  &quot;star1&quot;: &quot;Tim Robbins&quot;,
  &quot;star2&quot;: &quot;Morgan Freeman&quot;,
  &quot;star3&quot;: &quot;Bob Gunton&quot;,
  &quot;star4&quot;: &quot;William Sadler&quot;,
  &quot;no_of_votes&quot;: 2343110,
  &quot;gross&quot;: &quot;28,341,469&quot;
}
</code></pre>
<h3 id="deuxieme-partie-filtre-et-pagination">Deuxième partie - Filtre et pagination</h3>
<p>À l'aide des notes de cours sur les bonnes pratiques de conception d'un api, ajouter les options de filtre et de pagination pour la route <code>GET /film</code> qui affiche la liste de tous les livres.</p>
<ul>
<li>Le filtre se fera sur la colonne <strong>genre</strong> de la table imdb_top, ex <code>/film?genre=Fantasy</code></li>
<li>Pour la pagination, l'usager ne pourra que choisir la page à afficher. Par défaut on va afficher 50 films par page et si aucun numéro de page n'est fournis, on va afficher la page 1. Ex: <code>/film?page=2</code></li>
<li>Bien sur on va pouvoir combiner les deux paramètres comme ceci : <code>/film?genre=Fantasy&amp;page=1</code></li>
</ul>
<p>Modifiez la réponse pour y ajouter les informations suivantes : </p>
<ul>
<li>genre : La valeur qu'on a passé en paramètre, si aucune laisser vide <code>"genre"  : "",</code></li>
<li>nombreFilms : Le nombre total de films selon le filtre appliqué.</li>
<li>page : La valeur du paramètre, si aucun inscrire 1.</li>
<li>totalPage : Le nombre de pages au total, le nombre de films total divisé par le nombre de film par page (50) arrondis à l'entier supérieur.</li>
</ul>
<pre><code>{
    &quot;movies&quot; : [
        {
          ...
        },
        {
          ...
        }
    ],
    &quot;genre&quot; : &quot;Fantasy&quot;,
    &quot;nombreFilmsTotal&quot; : 66,
    &quot;page&quot; : 1,
    &quot;totalPage&quot; : 2
}
</code></pre>
<p>Pour découper le résultat en page, vous pouvez utiliser LIMIT et OFFSET dans la requête SQL ou bien array_slice sur le tableau de résultat de la requête qui aurait déjà filtré les films. (Vous faites une requête qui filtre les films selon le genre et ensuite utilisez array_slice sur le résultat en PHP).</p>
<h3 id="troisieme-partie-utilisation-de-monolog">Troisième partie - Utilisation de Monolog</h3>
<p>À l'aide des notes de cours sur l'utilisation de Monolog, faites en sorte qu'à chaque fois qu'on supprime un film, un message d'événement s'inscrit dans un fichier de log avec les configurations suivantes : </p>
<ul>
<li>Nom du fichier de log : <strong>MoviesLog</strong></li>
<li>Identification du message : <strong>deleteMovie</strong></li>
<li>Niveau de sévérité : <strong>INFO</strong></li>
<li>Message : "Le film "<strong>titre_du_film</strong>" id [<strong>id_du_film</strong>] a été supprimé."</li>
</ul>
<p>Exemple de résultat</p>
<pre><code>[2022-02-11T06:43:08.169802+01:00] deleteMovie.INFO: Le film &quot;Labyrinth&quot; id [1001] a été supprimé.
</code></pre>
<h3 id="quatrieme-partie-documentation">Quatrième partie - Documentation</h3>
<p>Créez la documentation pour les routes déjà existantes. À partir de maintenant, pour chaque route que nous allons ajouter, on va créer en même temps la documentation.</p>
<ul>
<li>Renommez le fichier de documentation resources/docs/base_slim_skeleton_v1.yaml pour <strong>imdb_api.yaml</strong>. C'est dans ce fichier que vous allez écrire la documentation. Il y a déjà du code dans se fichier que j'ai laissé en exemple. Vous pourrez le supprimer quand il ne vous sera plus nécessaire.</li>
<li>Modifiez le code du fichier src/Action/Docs/SwaggerUiAction.php pour que la variable $yamlFile fasse référence à votre fichier renommé.</li>
<li>En vous inspirant de ce qui est déjà présent dans le fichier de documentation et du site swagger.io, rédigez la documentation pour les 4 routes que vous avez créé dans la première partie.</li>
<li>Une fois terminé elle devrait apparaitre dans la page affiché quand vous utilisez la route <code>/docs</code></li>
</ul>
<h2 id="corrige">Corrigé</h2>
<p>Vous pouvez consulter ma version de l'exercice ici : <a href="https://github.com/Services-Web-Victo/ex04-corrige">https://github.com/Services-Web-Victo/ex04-corrige</a>.
Je vais la mettre à jour au fil des cours.</p>





                
              </article>
            </div>
          
          
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" hidden>
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
            Retour en haut de la page
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    
    <nav class="md-footer__inner md-grid" aria-label="Pied de page" >
      
        
        <a href="../03_hello_world_api/" class="md-footer__link md-footer__link--prev" aria-label="Précédent: 03 - Hello World API" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Précédent
              </span>
              03 - Hello World API
            </div>
          </div>
        </a>
      
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.top", "navigation.tracking"], "search": "../../assets/javascripts/workers/search.5bf1dace.min.js", "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.config.lang": "fr", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Rechercher", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version.title": "S\u00e9lectionner la version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.37e9125f.min.js"></script>
      
    
  </body>
</html>